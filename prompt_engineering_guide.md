# 大模型提示词（Prompt）设计指南

## 一、核心原则

好的提示词本质上是**精确的沟通**——你需要像给一个聪明但对你的具体场景一无所知的人下达指令一样。

---

## 二、结构化表达

不要写一大段话，而是用清晰的结构组织信息：

```
# 角色
你是一名资深的 Python 后端工程师。

# 任务
重构以下函数，提升可读性和性能。

# 约束
- 保持函数签名不变
- 兼容 Python 3.8+
- 不引入新的第三方依赖

# 输入
<这里放代码>

# 输出格式
返回重构后的代码，并在代码后用简短的列表说明改动点。
```

**为什么有效：** 模型能明确区分"我是谁"、"做什么"、"怎么做"、"输出什么"。

---

## 三、六个关键技巧

### 1. 明确角色（Role）

| 模糊 | 精确 |
|------|------|
| 帮我写个文案 | 你是一名面向 Z 世代用户的社交媒体运营，擅长短视频脚本 |

角色设定会锚定模型的知识范围、语气和专业深度。

### 2. 提供上下文（Context）

```
差：翻译这段话。
好：这是一篇医学论文的摘要，目标读者是普通患者，
    请用通俗易懂的中文翻译，避免专业术语。
```

上下文回答了三个问题：**背景是什么？给谁看？用在哪？**

### 3. 用示例代替描述（Few-shot）

与其说"输出要简洁"，不如直接给一个例子：

```
请按以下格式输出：

输入：苹果、香蕉、橙子
输出：水果类 | 3项 | 常见度：高

现在处理：
输入：Python、Rust、Go
```

**一个好的示例胜过十句描述。**

### 4. 拆解复杂任务（Chain of Thought）

```
差：分析这家公司的财务状况并给出投资建议。

好：请按以下步骤分析：
    1. 先提取关键财务指标（营收、利润率、负债率）
    2. 与同行业平均水平对比
    3. 识别主要风险因素
    4. 基于以上分析，给出结论
```

强制分步会显著提升推理质量。

### 5. 设定约束和边界

```
约束示例：
- 回答不超过 200 字
- 如果信息不足，明确说"无法判断"，不要编造
- 只基于提供的文档内容回答，不要引用外部知识
- 用 JSON 格式输出
```

约束防止模型"自由发挥"导致不可控输出。

### 6. 指定输出格式

```
请以 Markdown 表格输出，列包含：
| 问题 | 严重程度(高/中/低) | 建议修复方案 |
```

明确格式让输出可直接使用，减少二次加工。

---

## 四、常见反模式（避坑）

| 反模式 | 问题 | 改进 |
|--------|------|------|
| "尽量做好" | 没有标准 | 定义"好"的具体指标 |
| "写一篇文章" | 缺少长度、风格、受众 | 补充完整要素 |
| 一次塞入 5 个不相关任务 | 注意力分散 | 一次一个核心任务 |
| "不要写得太长也不要太短" | 模糊否定 | 用肯定句："控制在 300-500 字" |
| 假设模型知道你的项目 | 缺少上下文 | 提供必要的背景信息 |

---

## 五、关于"让 AI 复述需求"的辨析

### 适合使用的场景

**复杂、模糊、高风险的任务：**

```
我的需求是 [一大段描述]...

在开始之前，请先用你自己的话复述我的需求，
列出你理解的关键点，等我确认后再执行。
```

以下情况有价值：

- 需求本身有歧义，想确认模型没有理解偏差
- 多轮对话中上下文很长，担心模型遗漏了关键条件
- 任务成本高（比如生成大量代码），做错了返工代价大

### 不适合使用的场景

**简单、明确的任务会浪费 token：**

```
# 没必要这样做：
"把这段英文翻译成中文。翻译前先复述一遍我的需求。"

# 直接翻译就行
```

### 核心陷阱

> 模型复述得很好 ≠ 模型真正理解了

模型擅长改写和总结文本，它可以完美复述你的需求，但在实际执行时仍然偏离意图。复述考验的是语言能力，而不是推理能力。

### 更有效的替代做法

**1. 让模型先输出计划/大纲，再执行**

```
先列出你的实现思路和步骤，不要写代码。
```

这比复述更能暴露理解偏差，因为计划涉及具体决策。

**2. 让模型指出模糊点**

```
在开始之前，列出你认为这个需求中不够明确、
需要我澄清的地方。
```

这比复述更主动——模型不是被动重复，而是在做分析。

**3. 先做一小部分，验证方向**

```
先只实现第一个模块，我确认方向正确后再继续。
```

---

## 六、进阶策略

- **迭代优化**：第一版提示词很少是最优的。根据输出结果不断调整，每次只改一个变量。
- **让模型自检**：在末尾加上"在输出前，先检查是否满足所有约束条件"。
- **负面示例**：除了给正确示例，也可以给一个错误示例并说明为什么不好。
- **元提示**：让模型帮你优化提示词——"请改进以下提示词，使其更精确：..."

---

## 七、提示词编写 Checklist

每次写提示词时，按以下步骤逐项检查：

### 第一步：明确目标

- [ ] 我能用一句话说清楚这次想让 AI 做什么
- [ ] 核心任务只有一个（如果有多个，拆分为多次对话）

### 第二步：设定角色

- [ ] 设定了具体的角色身份（专业领域、经验水平）
- [ ] 角色定义与任务匹配（不要让"Python 专家"写 Java 代码）

### 第三步：补充上下文

- [ ] 说明了背景信息（这个任务是做什么用的）
- [ ] 说明了目标受众（输出给谁看）
- [ ] 提供了必要的输入材料（代码、文本、数据等）

### 第四步：给出示例

- [ ] 对于格式要求明确的任务，提供了至少一个正确示例
- [ ] 如有必要，提供了一个反面示例说明什么是不期望的

### 第五步：设定约束

- [ ] 限定了输出的长度/范围
- [ ] 明确了禁止事项（不要编造、不要引用外部知识等）
- [ ] 用肯定句表达要求，避免模糊的否定句

### 第六步：指定输出格式

- [ ] 明确了输出的格式（Markdown、JSON、表格、代码等）
- [ ] 如果是分步任务，明确了步骤顺序

### 第七步：复查与验证

- [ ] 重读一遍提示词，以"AI 视角"检查是否有歧义
- [ ] 对于复杂任务：加上"先输出计划，等我确认后再执行"
- [ ] 对于高风险任务：加上"如果信息不足，请提出疑问而不是猜测"

### 第八步：迭代优化

- [ ] 检查 AI 的首次输出是否符合预期
- [ ] 如果不符合，定位是哪一步的信息不够（角色？上下文？约束？）
- [ ] 每次只调整一个变量，观察输出变化

---

## 八、快速模板

以下是一个可直接复用的提示词模板：

```
# 角色
你是 [具体角色描述]。

# 背景
[任务背景和上下文信息]

# 任务
[一句话描述核心任务]

# 具体要求
1. [要求一]
2. [要求二]
3. [要求三]

# 约束
- [约束一]
- [约束二]

# 输出格式
[明确的格式说明或示例]

# 示例（可选）
输入：[示例输入]
输出：[示例输出]
```

---

> **总结：** 好的提示词不是"说得多"，而是**说得准**。把模糊的意图转化为结构化、可验证的指令，就是提示词工程的核心。
